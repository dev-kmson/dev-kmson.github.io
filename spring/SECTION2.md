---
sort: 2
---

# 빈 생명주기 콜백

---

## 콜백 호출 방법
    
라이프 사이클

    - 스프링 빈의 이벤트 라이프 사이클

        스프링 컨테이너 생성 -> 스프링 빈 생성 -> 의존관계 주입 
            -> 초기화 콜백 -> 사용 -> 소멸전 콜백 -> 스프링 종료

        초기화 콜백 : 빈이 생성되고, 빈의 의존관 주입이 완료된 후 호출
        소멸전 콜백 : 빈이 소멸되기 직전에 호출

스프링 전용 인터페이스 (InitializingBean, DisposableBean)

    - 스프링 전용 인터페이스를 통한 초기화, 소멸 메서드 호출

        InitializingBean -> afterPropertiesSet()
        DisposableBean -> destroy()

    - 스프링 전용 인터페이스에 의존적임
    
        어노테이션으로 적용되는 것이 아닌 스프링 전용 인터페이스 자체를
        자신의 구현 코드가 의존하게 됨 -> POJO 위반(어노테이션도 POJO 위반으로 간주하는 견해도 있음)
    
    - 외부 라이브러리에 적용할 수 없음
            
        외부 라이브러리의 컴파일된 특정 클래스를 빈으로 등록하였어도
        해당 클래스에 인터페이스를 구현하여 콜백 메서드를 호출할 수 있는 방법이 없음

    - 초기화, 소멸 메서드의 이름을 변경할 수 없음
    
    - 스프링 초창기에 나온 방법으로써, 현재는 거의 사용되지 않음

빈 옵션 초기화, 소멸 메서드 지정 (initMethod, destroyMethod)

    - 빈 어노테이션 옵션을 통한 초기화, 소멸 메서드 호출

        @Bean(initMethod = "init", destroyMethod = "close")

    - 빈 어노테이션을 통한 호출 방법이므로 수동으로 등록하는 빈의 경우에만 사용 가능

    - 외부 라이브러리의 특정 클래스를 빈으로 등록하여 콜백, 호출 메서드 지정 및 호출 가능

        외부 라이브러리가 초기화, 소멸 콜백용 메서드를 만들어둔 경우에 한함

    - 초기화, 소멸 메서드의 이름 지정 가능

    - 추론 기능을 통해 소멸 메소드를 자동 호출해 줌
        
        destroyMethod에는 기본값 "(inferred)"가 등록되어 있음

        @Bean 어노테이션을 이용하여 직접 스프링 빈으로 등록하는 경우
        소멸 메서드를 옵션으로 따로 지정하지 않아도 해당 빈에 통상적으로 
        자주 사용되는 소멸 메서드 명인 close 또는 shotdown라는 이름의
        메서드가 존재한다면 추론을 통해 해당 메서드를 자동 호출함

자바 표준 (@ PostConstruct, @ PreDestroy)

    - 자바 표준 어노테이션을 통한 초기화, 소멸 메서드 호출

    - 최신 스프링에서 가장 권장하는 호출 방법

    javax.annotation 하위 패키지에 존재하는 어노테이션으로 
    스프링에 종속적인 기술이 아닌 JSR-250 자바 표준

    - 컴포넌트 스캔으로 등록된 경우에도 콜백 호출 가능

        빈 어노테이션 옵션을 통한 호출 방법은 수동으로 빈을 등록할 경우에만 사용 가능하지만
        자바 표준 어노테이션을 통한 호출 방법은 컴포넌트 스캔 대상인 경우에도 사용 가능

    - 외부 라이브러리에 적용할 수 없음

        @Bean을 통하여 수동으로 빈을 직접 등록하여도 컴파일된 외부 라이브러리에 해당 어노테이션을 적용시킬 수 없음
        @Component을 통하여 컴포넌트 스캔 시 자동으로 빈에 등록되었어도 마찬가지임

## 콜백 선택 기준

    일반적인 경우에는 @PostConstruct, @PreDestroy 자바 표준 어노테이션을 이용하고
    외부 라이브러리에 대한 콜백 호출이 필요할 시 빈 초기화, 소멸 메서드 지정 방법을 이용
        





