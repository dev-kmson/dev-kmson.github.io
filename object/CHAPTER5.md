---
sort: 5
---

# 책임 할당하기

> ***객체지향 설계에서 가장 중요한 것은 적절한 객체에게 적절한 책임을 할당하는 능력이다***

객체에게 중요한 것은 데이터가 아니라 외부에 제공하는 행동이다.  
객체가 수행하는 행동이란 곧 객체의 책임을 의미한다.  
책임 중심의 설계에서는 "이 객체가 수행해야 하는 책임은 무엇인가"를 결정한 후에  
"이 책임을 수행하는 데 필요한 데이터는 무엇인가"를 결정한다.  
즉 **책임을 먼저 결정한 후에 객체의 상태를 결정**한다는 것이다.

---

> ***객체에게 할당된 책임의 품질은 협력에 적합한 정도로 결정된다***

객체의 입장에서는 책임이 조금 어색해 보이더라도 협력에 적합하다면 그 책임은 좋은 것이다.  
책임은 객체의 입장이 아니라 객체가 함여하는 협력에 적합해야 한다.  
협력을 시작하는 주체는 메시지 전송자이기 때문에 협력에 적합한 책임이란 메시지 수신자가 아니라  
메시지 전송자에게 적합한 책임을 의미한다.  
즉, **메시지를 전송하는 클라이언트의 의도에 적합한 책임을 할당**해야 한다.  

협력에 적합한 책임을 수확하기 위해서는 객체를 결정한 후에 메시지를 선택하는 것이 아니라  
메시지를 결정한 후에 객체를 선택해야 한다.  
메시지가 존재하기 때문에 그 메시지를 처리할 객체가 필요한 것이다.  
**객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택**해야 한다.  

메시지를 수신하기로 결정된 객체는 메시지를 처리할 '책임'을 할당받게 된다.  
메시지를 먼저 결정하기 때문에 메시지 송신자는 **메시지 수신자에 대한 어떠한 가정도 할 수 없다**.  
메시지 전송자의 관점에서 **메시지 수신자가 깔끔하게 캡슐화**되는 것이다.  

책임 중심의 설계가 응집도가 높고 결합도가 낮으며 변경하기 쉽다고 말하는 이유가 여기에 있다.  
협력이라는 문맥에서 적절한 책임이란 곧 클라이언트의 관점에서 적절한 책임을 의미한다.  
올바른 객체지향 설계는 클라이언트가 전송할 메시지를 결정한 후에야 비로소 객체의 상태를 저장하는 데  
필요한 내부 데이터에 관해 고민하기 시작한다.  
결론적으로 **책임 중심의 설계에서는 협력이라는 문맥 안에서 객체가 수행할 책임에 초점을 맞춘다**.  

> ***올바른 도메인 모델이란 존재하지 않는다***

많은 사람들이 도메인 모델은 구현과는 무관하다고 생각하지만 이것은 도메인 모델의 개념을 오해한 것에 불과하다.  
도메인 모델은 도메인을 갠며적으로 표현한 것이지만 그 안에 포함된 개념과 관계는 구현의 기반이 돼야 한다.  
이것은 **도메인 모델이 구현을 염두에 두고 구조화되는 것이 바람직하다는 것을 의미**한다.  
반대로 코드의 구조가 도메인을 바라보는 관점을 바꾸기도 한다.  
필요한 것은 도메인을 그대로 투영한 모델이 아니라 구현에 도움이 되는 모델이다.  
다시 말해서 실용적이면서도 유용한 모델이 답이다.

> ***정보 전문가에게 책임을 할당하라***

책임을 수행하는 데 필요한 메시지를 결정할 때 메시지는 메시지를 수신할 객체가 아니라  
메시지를 전송할 객체의 의도를 반영해서 결정해야 하고 메시지가 결정되고나면 메시지에  
적합한 객체를 선택해야 한다.  
메시지를 수신할 적합한 객체는 누구인가?  
객체에게 책임을 할당하는 첫 번째 원칙은 **책임을 수행할 정보를 알고 있는 객체에게 책임을 할당하는 것**이다.  
GRASP에서는 이를 INFORMATION EXPERT(정보 전문가) 패턴이라고 부른다.  

INFORMATION EXPERT 패턴은 객체가 자율적인 존재여야 한다는 사실을 다시 한번 상기시킨다.  
정보를 알고 있는 객체만이 책임을 어떻게 수행할지 스스로 결정할 수 있기 때문이다.  
INFORMATION EXPERT 패턴을 따르면 **정보와 행동을 최대한 가까운 곳에 위치시키기 때문에 캡슐화를 유지**할 수 있다.  
즉, 자율성 높은 객체들로 구성된 협력 공동체를 구축할 가능성이 높아진다.

> ***설계는 트레이드오프 활동이라는 것을 기억하라***

동일한 기능을 구현할 수 있는 무수히 많은 설계가 존재한다.  
설계를 진행하다보면 몇 가지 설계 중에서 한가지를 선택해야 하는 경우가 빈번하게 발생한다.  
이 경우에는 올바른 책임 할당을 위해 INFORMATION EXPERT 패턴 이외의 다른 책임 할당 패턴들을 함께 고려할 필요가 있다.  

LOW COUPLING(낮은 결합도) 패턴과 HIGH COHESION(높은 응집도) 패턴이 그것이다.  
책임을 할당할 수 있는 다양한 대안들이 존재한다면 **응집도와 결합도의 측면에서 더 나은 대안을 선택**하는 것이 좋다.  
즉, 높은 응집도와 낮은 결합도를 얻을 수 있는 설계가 있다면 그 설계를 선택해야 한다는 것이다.

> ***창조자에게 객체 생성 책임을 할당하라***

어떤 객체에게 인스턴스를 생성할 책임을 부여할 것인가?  
GRASP의 CREATOR(창조자) 패턴은 이 같은 경우에 사용할 수 있는  
책임 할당 패턴으로서 **객체를 생성할 책임을 어떤 객체에게 할당할지에 대한 지침을 제공**한다.  

> ***변경의 이유가 하나 이상인 클래스를 찾아라***

일반적으로 설계를 개선하는 작업은 **변경의 이유가 하나 이상인 클래스를 찾는 것으로부터 시작하는 것이 좋다**.  

**인스턴스 변수가 초기화 되는 시점을 살펴라**.  
응집도가 높은 클래스는 인스턴스를 생성할 때 모든 속성을 함께 초기화한다.  
반면 응집도가 낮은 클래스는 객체의 속성 중 일부만 초기화하고 일부는 초기화되지 않은 상태로 남겨진다.  
클래스의 속성이 서로 다른 시점에 초기화되거나 일부만 초기화된다는 것은 응집도가 낮다는 증거다.  
따라서 함께 초기화되는 속성을 기준으로 코드를 분리해야 한다.  

**메서드들이 인스턴스 변수를 사용하는 방식을 살펴라**.  
모든 메서드가 객체의 모든 속성을 사용한다면 클래스의 응집도는 높다고 볼 수 있다.  
반면 메서드들이 사용하는 속성에 따라 그룹이 나뉜다면 클래스의 응집도가 낮다고 볼 수 있다.  

> ***타입을 명시적으로 정의하고 각 타입에 다형적으로 행동하는 책임을 할당하라***

객체의 타입에 따라 변하는 로직이 있을 때 변하는 로직을 담당할 책임을 어떻게 할당해야 하는가?  
프로그램을 if ~ else 또는 switch ~ case 등의 조건 논리를 사용해서 설계한다면  
새로운 변화가 일어난 경우 조건 논리를 수정해야 한다.  
이것은 프로그램을 수정하기 어렵고 변경에 취약하게 만든다.  
POLYMORPHISM(다형성) 패턴은 객체의 타입을 검사해서 타입에 따라 여러 대안들을 수행하는  
조건적인 논리를 사용하지 말라고 경고한다.  
대신 **다형성을 이용해 새로운 변화를 다루기 쉽게 확장**하라고 권고한다.  

> ***안정된 인터페이스를 형성하도록 책임을 할당하라***

변화가 예상되는 **불안정한 지점들을 식별하고 그 주위에 안정된 인터페이스를 형성**하도록 책임을 할당하라.  
PROTECTED VARIATIONS 패턴은 책임 할당의 관점에서 캡슐화를 설명한 것이다.  

하나의 클래스가 여러 타입의 행동을 구현하고 있는 것 처럼 보인다면  
클래스를 분해하고 POLYMORPHISM 패턴에 따라 책임을 분산시켜라.  
예측 가능한 변경으로인해 여러 클래스들이 불안정해진다면 PROTECTED VARATIONS 패턴에 따라  
안정적인 인터페이스를 뒤로 변경을 캡슐화하라.  
적절한 상황에서 **두 패턴을 조합하면 코드 수정의 파급 효과를 조절할 수 있고  
변경과 확장에 유연하게 대처할 수 있는 설계를 얻을 수 있다**.

---

- GRASP 패턴(General Responsibility Assignment Software Pattern)
    - '크레이그 라만'이 제안
    - **일반적인 책임 할당을 위한 스프트웨어 패턴**
    - 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한 것


- 정보 전문가 패턴(INFORMATION EXPERT PATTERN)
    - 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것
    - **협력에 필요한 지식과 방법을 가장 잘 알고 있는 객체에게 도움을 요청**한다.
    - 객체에게 책임을 할당할 때 가장 기본이 되는 책임 할당 원칙이다.
    

- 낮은 결합도 패턴(LOW COUPLING PATTERN)
    - 설계의 전체적인 **결합도가 낮게 유지되도록 책임을 할당**  
    - 낮은 결합도는 모든 설계 결정에서 염두에 둬야 하는 원리  
    - 현재의 책임 할당을 검토하거나 여러 설계 대안들이 있을 때 낮은 결합도를 유지할 수 있는 설계를 선택
 
   
- 높은 응집도 패턴(HIGH COHESION PATTERN)
    - **높은 응집도를 유지할 수 있게 책임을 할당**  
    - 높은 응집도는 모든 설계 걸정에서 염두에 둬야 하는 원리  
    - 현재의 책임 할당을 검토하거나 여러 설계 대안들이 있을 때 높은 응집도를 유지할 수 있는 설계를 선택  
    

- 창조자 패턴(CREATOR PATTERN)
    - 어떤 방식으로든 **생성되는 객체와 연결되거나 관련될 필요가 있는 객체에 해당 객체를 생성할 책임을 맡기는 것**  
    - 이미 결합돼 있는 객체에게 생성 책임을 할당하는 것은 설계의 전체적인 결합도에 영향을 미치지 않음
    - 이미 존재하는 객체 사이의 관계를 이용하기 때문에 설계가 낮은 겹합도를 유지 가능
    

- 다형성 패턴(POLYMORPHISM PATTERN)
    - 객체의 종류에 따라 행동양식이 바뀐다면 **조건문을 사용하지말고 다형성 기능을 사용**
    
- PROTECTED VARIATIONS 패턴
    - **변경될 여지가 있는 곳에 안정된 인터페이스르 정의해서 사용**