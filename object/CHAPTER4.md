---
sort: 4
---

# 설계 품질과 트레이드오프

> ***좋은 설계란 오늘의 기능을 수행하면서 내일의 변경을 수용할 수 있는 설계다***

---

> ***변경될 수 있는 어떤 것이라도 캡슐화해야 한다***

상태와 행동을 하나의 객체 안에 모으는 이유는 객체의 내부 구현을 외부로부터 감추기 위해서다.  
객체를 사용하면 변경 가능성이 높은 부분은 내부에 숨기고 외부에는 상대적으로  
안정적인 부분만 공개함으로써 변경의 여파를 통제할 수 있다.  
객체를 설계하기 위한 가장 기본적인 아이디어는 변경의 정도에 따라 구현과 인터페이스를 분리하고   
외부에서는 인터페이스만 의존하도록 관계를 조절하는 것이다.  
이는 객체지향 설계의 가장 중요한 원리인 캡슐화를 말한다.  

설계가 필요한 이유는 요구사항이 변경되기 때문이고, **캡슐화가 중요한 이유는  
불안정한 부분과 안정적인 부분을 분리해서 변경의 영향을 통제할 수 있기 때문이다**.  
즉, 캡슐화란 변경 가능성이 높은 부분을 객체 내부로 숨기는 추상화 기법이자  
대상을 단순화하는 추상화의 한 종류이다.

> ***응집도와 결합도는 변경과 관련된 것이다***

객체지향의 관점에서 응집도는 객체 또는 클래스에 **얼마나 관련 높은 책임들을 할당했는지**를 나타낸다.  
객체지향의 관점에서 결합도는 객체 또는 클래스가 **협력에 필요한 적절한 수준의 관계만을 유지하고 있는지**를 나타낸다.  
응집도와 결합도의 의미를 이해하기 위한 첫걸음은 두 개념 모두 설계와 관련 있다는 사실을 이해하는 것이다.  
**좋은 설계란 높은 응집도와 낮은 결합도를 가진 모듈로 구성된 설계를 의미**한다.

높은 응집도와 낮은 결합도를 가진 설계를 추구해야 하는 이유는 단 한 가지다.  
그것이 **설계를 변경하기 쉽게 만들기 때문**이다.  
변경의 관점에서 응집도란 변경이 발생할 때 **모듈 내부에서 발생하는 변경의 정도를 측정**할 수 있다.  
변경의 관점에서 결합도란 **한 모듈이 변경되기 위해서 다른 모듈의 변경을 요구하는 정도로 측정**할 수 있다.  

**응집도와 결합도는 변경과 관련이 깊다**.  
어떤 설계를 쉽게 변경할 수 있다면 높은 응집도를 가진 요소들로 구성돼 있고  
요소들 사이의 결합도가 낮을 활률이 높다.  
만약 코드가 변경에 강하게 저항하고 있다면 구성 요소들의 응집도가 낮고  
요소들이 서로 강하게 결합돼 있을 확률이 높다.  
캡슐화의 정도가 응집도와 결합도에 영향을 미친다.  
응집도와 결합도를 고려하기 전에 **먼저 캡슐화를 향상시키기 위해 노력하라**.  

> ***접근자와 수정자 메서드는 객체 내부의 상태에 대한 어떤 정보도 캡슐화하지 못한다***

접근자와 수정자 메서드의 이름 안에 이미 해당 이름의 인스턴스 변수가 존재한다는 사실을  
퍼블릭 인터페이스에 노골적으로 드러낸다.  
설계할 때 협력에 관해 고민하지 않으면 캡슐화를 위반하는 과도한 접근자와 수정자를 가지게 되는 경향이 있다.  
객체가 사용될 문맥을 추측할 수 밖에 없는 경우 개발자는 어떤 상황에서도 해당 객체가  
사용될 수 있게 최대한 많은 접근자 메서드를 추가하게 되는 것이다.  
이처럼 접근자와 수정자에 과도하게 의존하는 설계 방식을 **추측에 의한 설계 전략(Design-by-Guessing Streategy)이라고 부른다**.  
  
이 전략은 객체가 사용될 **협력을 고려하지 않고 객체가 다양한 상황에서 사용될 수 있을 것이라는  
막연한 추축을 기반으로 설계를 진행**한다.  
따라서 프로그래머는 내부 상태를 드러내는 메서드를 최대한 많이 추가해야 한다는 압박에 시달릴 수 밖에 없으며  
결과적으로 대부분의 **내부 구현이 퍼블릭 인터페이스에 그대로 노출**될 수 밖에 없는 것이다.  
그 결과, 캡슐화를 위반하는 **변경에 취약한 설계**를 얻게 된다.  

객체에게 의미있는 메드는 객체가 책임져야 하는 무언가를 수행하는 메서드이다.  
속성의 가시성을 private로 설정했다고 해도 접근자와 수정자를 통해 속성을 외부로 제공하고 있다면   
캡슐화를 위반하는 것이다.
  

